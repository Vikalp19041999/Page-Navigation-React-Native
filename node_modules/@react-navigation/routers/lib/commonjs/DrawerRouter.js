var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=DrawerRouter;exports.DrawerActions=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _shortid=_interopRequireDefault(require("shortid"));var _TabRouter=_interopRequireWildcard(require("./TabRouter"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var DrawerActions=_objectSpread({},_TabRouter.TabActions,{openDrawer:function openDrawer(){return{type:'OPEN_DRAWER'};},closeDrawer:function closeDrawer(){return{type:'CLOSE_DRAWER'};},toggleDrawer:function toggleDrawer(){return{type:'TOGGLE_DRAWER'};}});exports.DrawerActions=DrawerActions;function DrawerRouter(options){var router=(0,_TabRouter.default)(options);return _objectSpread({},router,{type:'drawer',getInitialState:function getInitialState(_ref){var routeNames=_ref.routeNames,routeParamList=_ref.routeParamList;var index=options.initialRouteName===undefined?0:routeNames.indexOf(options.initialRouteName);return{stale:false,type:'drawer',key:"drawer-"+(0,_shortid.default)(),index:index,routeNames:routeNames,routeKeyHistory:[],routes:routeNames.map(function(name){return{name:name,key:name+"-"+(0,_shortid.default)(),params:routeParamList[name]};}),isDrawerOpen:false};},getRehydratedState:function getRehydratedState(partialState,_ref2){var routeNames=_ref2.routeNames,routeParamList=_ref2.routeParamList;if(partialState.stale===false){return partialState;}var state=router.getRehydratedState(partialState,{routeNames:routeNames,routeParamList:routeParamList});return _objectSpread({},state,{type:'drawer',key:"drawer-"+(0,_shortid.default)(),isDrawerOpen:typeof partialState.isDrawerOpen==='boolean'?partialState.isDrawerOpen:false});},getStateForRouteFocus:function getStateForRouteFocus(state,key){var index=state.routes.findIndex(function(r){return r.key===key;});var result=index===-1||index===state.index?state:router.getStateForRouteFocus(state,key);if(result.isDrawerOpen){return _objectSpread({},result,{isDrawerOpen:false});}return result;},getStateForAction:function getStateForAction(state,action,options){switch(action.type){case'OPEN_DRAWER':if(state.isDrawerOpen){return state;}return _objectSpread({},state,{isDrawerOpen:true});case'CLOSE_DRAWER':if(!state.isDrawerOpen){return state;}return _objectSpread({},state,{isDrawerOpen:false});case'TOGGLE_DRAWER':return _objectSpread({},state,{isDrawerOpen:!state.isDrawerOpen});case'NAVIGATE':return router.getStateForAction(_objectSpread({},state,{isDrawerOpen:false}),action,options);case'GO_BACK':if(state.isDrawerOpen){return _objectSpread({},state,{isDrawerOpen:false});}return router.getStateForAction(state,action,options);default:return router.getStateForAction(state,action,options);}},actionCreators:DrawerActions});}
//# sourceMappingURL=DrawerRouter.js.map